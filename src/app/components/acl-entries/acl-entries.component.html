<fs-list [config]="aclEntriesConfig">
  <fs-list-column>
    <ng-template fs-list-header>
      Context
    </ng-template>
    <ng-template
      fs-list-cell
      let-row="row">
      @if (row.object) {
        <div
          class="fs-row.gap-sm">
          @if (row.object.imageUrl) {
            <fs-badge
              shape="circle"
              image="{{ row.object.imageUrl }}">
            </fs-badge>
          }
          <span>
            <div>
              <small>
                {{ row.object.className }}
              </small>
            </div>
            <a (click)="update(row)">
              {{ row.object.name }}
            </a>
          </span>
        </div>
      } @else {
        <a (click)="update(row)">
          App
        </a>
      }
    </ng-template>
  </fs-list-column>
  <fs-list-column [show]="environmentShow">
    <ng-template fs-list-header>
      {{ environmentLabel }}
    </ng-template>
    <ng-template
      fs-list-cell
      let-row="row">
      {{ row.environment?.name }}
    </ng-template>
  </fs-list-column>
  <fs-list-column>
    <ng-template fs-list-header>
      Roles
    </ng-template>
    <ng-template
      fs-list-cell
      let-row="row">
      <div class="fs-column">
        @for (aclEntry of row.aclEntries; track aclEntry) {
          <div
            div
            >
            @switch (row.level) {
              @case ('app') {
                <fs-acl-role-popover
                  [aclRole]="aclEntry.aclRole"
                  objectName="App">
                  {{ aclEntry.aclRole.name }}
                </fs-acl-role-popover>
              }
              @default {
                @if (row.object) {
                  <fs-acl-role-popover [aclRole]="aclEntry.aclRole">
                    {{ aclEntry.aclRole.name }}
                  </fs-acl-role-popover>
                }
              }
            }
          </div>
        }
      </div>
    </ng-template>
  </fs-list-column>
</fs-list>